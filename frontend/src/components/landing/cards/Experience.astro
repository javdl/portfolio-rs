---
import { Icon } from "astro-icon/components";
import dayjs from "dayjs";
import { languageTag } from "@paraglide/runtime";

interface Props {
    startDate: Date;
    endDate: Date | null;
    current: boolean;
    position: string;
    company: string;
    url: string;
    description: string;
}

let {
    position,
    description,
    startDate,
    endDate,
    current,
    url,
    company,
}: Props = Astro.props;
---

<div class="grid gap-1 relative">
    <div
        class={`aspect-square w-3 rounded-full absolute left-0 translate-x-[-29.5px] z-10 top-1 ${current ? "bg-gray-600" : "bg-gray-300"}`}
    >
    </div>
    <div class="text-gray-500 text-sm">
        {
            languageTag() === "zh"
                ? `${dayjs(startDate).format("YYYY年MM月")} - ${endDate ? dayjs(endDate).format("YYYY年MM月") : "至今"}`
                : `${dayjs(startDate).format("MMM YYYY")} - ${endDate ? dayjs(endDate).format("MMM YYYY") : "Present"}`
        }
    </div>
    <div class="text-gray-800 text-xl">{position}</div>
    <div class="text-gray-500 text-md mb-1">
        <a
            class="group flex items-center hover:text-[#68b5fc] duration-200"
            href={url}
            rel="noopener"
            target="_blank"
        >
            {company}
            <Icon
                name="arrow-up-right"
                title="Link"
                size="1rem"
                class="duration-200 group-hover:translate-x-[1.5px]"
            />
        </a>
    </div>
    <div class="text-gray-700 text-sm">
        {description}
    </div>
</div>
